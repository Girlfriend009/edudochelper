{% extends "base.html" %}
{% block title %}–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h3>–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</h3>
</div>

<form method="GET" class="mb-3">
    <div class="input-group">
        <input type="text" name="q" class="form-control" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —à–∞–±–ª–æ–Ω–∞..." value="{{ search_query }}">
        <button class="btn btn-outline-secondary" type="submit">üîç</button>
    </div>
</form>

{% if items %}
<table class="table table-hover">
    <thead>
    <tr>
        <th>ID</th>
        <th>–®–∞–±–ª–æ–Ω</th>
        <th>–§–∞–π–ª</th>
        <th>–î–∞—Ç–∞</th>
        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
    </tr>
    </thead>
    <tbody>
    {% for doc in items %}
    <tr>
        <td>{{ doc.id }}</td>
        <td>
            {% set tpl = doc.template_id | get_template %}
            {{ tpl.name if tpl else '‚Äî' }}
        </td>
        <td>{{ doc.filename }}</td>
        <td>{{ doc.created_at.strftime('%d.%m.%Y %H:%M') }}</td>
        <td>
            <a href="{{ url_for('generated_download', doc_id=doc.id) }}" class="btn btn-sm btn-outline-primary">–°–∫–∞—á–∞—Ç—å</a>
            <form method="POST" action="{{ url_for('generated_delete', doc_id=doc.id) }}" style="display:inline;" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç?')">
                <button type="submit" class="btn btn-sm btn-outline-danger">–£–¥–∞–ª–∏—Ç—å</button>
            </form>
        </td>
    </tr>
    {% endfor %}
    </tbody>
</table>
{% else %}
<div class="alert alert-info">–ù–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.</div>
{% endif %}
{% endblock %}