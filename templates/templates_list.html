{% extends "base.html" %}
{% block title %}–®–∞–±–ª–æ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h3>–®–∞–±–ª–æ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h3>
    <a href="{{ url_for('template_edit') }}" class="btn btn-success">+ –°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω</a>
</div>

<form method="GET" class="mb-3">
    <div class="input-group">
        <input type="text" name="q" class="form-control" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é..." value="{{ search_query }}">
        <button class="btn btn-outline-secondary" type="submit">üîç</button>
    </div>
</form>

{% if templates %}
<table class="table table-hover">
    <thead>
    <tr>
        <th>ID</th>
        <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
        <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
        <th>–û–±–Ω–æ–≤–ª—ë–Ω</th>
        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
    </tr>
    </thead>
    <tbody>
    {% for tpl in templates %}
    <tr>
        <td>{{ tpl.id }}</td>
        <td><strong>{{ tpl.name }}</strong></td>
        <td>{{ tpl.description[:50] ~ '...' if tpl.description|length > 50 else tpl.description }}</td>
        <td>{{ tpl.last_modified.strftime('%d.%m.%Y %H:%M') }}</td>
        <td>
            <a href="{{ url_for('template_generate', tpl_id=tpl.id) }}" class="btn btn-sm btn-outline-primary">–°–æ–∑–¥–∞—Ç—å</a>
            <a href="{{ url_for('template_edit', tpl_id=tpl.id) }}" class="btn btn-sm btn-outline-secondary">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
            <form method="POST" action="{{ url_for('template_delete', tpl_id=tpl.id) }}" style="display:inline;" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å —à–∞–±–ª–æ–Ω –∏ –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã?')">
                <button type="submit" class="btn btn-sm btn-outline-danger">–£–¥–∞–ª–∏—Ç—å</button>
            </form>
        </td>
    </tr>
    {% endfor %}
    </tbody>
</table>
{% else %}
<div class="alert alert-info">–ù–µ—Ç —à–∞–±–ª–æ–Ω–æ–≤. <a href="{{ url_for('template_edit') }}">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π!</a></div>
{% endif %}
{% endblock %}